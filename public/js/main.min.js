async function sentComment(n){let a=document.querySelector('.article[data-article="'+n+'"]'),o=new FormData;let l=document.forms["add_"+n].elements.text;o.append("text",l.value),o.append("id",n),o.append("ajaxSettings","page:Main:sentComment");let e=await fetch("/Ajax.php",{method:"POST",body:o});var s=await e.json();if(s){let t=document.createElement("div");t.classList.add("comment");n=a.getElementsByClassName("comment")[0];let e=a.querySelector(".comments_show");n?e.insertBefore(t,a.getElementsByClassName("comment")[0]):e.appendChild(t);var c,m={b:"name",span:"text",p:"date"};for(c in m){let e=document.createElement(c);e.textContent=s[m[c]],t.appendChild(e)}l.value="",o=null}}async function showComments(e,n=""){let a=new FormData,o=document.querySelector('.article[data-article="'+e+'"]');var t=o.querySelectorAll(".comment"),t=""!=n?0:t.length;a.append("from",t),a.append("id",e);e=o.querySelector(".hint_choosed");e&&a.append("filter",e.value),a.append("ajaxSettings","page:Main:showComments");let l=await fetch("/Ajax.php",{method:"POST",body:a});var s=await l.json();if(0!=s[0]){""!=n&&(o.querySelector(".comments_show").innerText="");let e=o.querySelector(".comments_show");var c,m={b:"name",span:"text",p:"date"};for(c in s)if(3!=c){let t=document.createElement("div");for(var i in e.appendChild(t),t.classList.add("comment"),m){let e=document.createElement(i);e.textContent=s[c][m[i]],t.appendChild(e)}}let t=o.querySelector(".comments_more");1!=s.length&&"show"==s[s.length-1]||(t.style.display="none"),4==s.length&&(t.style.display="block"),a=null}}async function filterComments(o,e){let l=document.querySelector('.article[data-article="'+o+'"]'),s=l.querySelector(".comments_hints"),c=document.getElementById("filter_"+o);if(c.hasAttribute("class")&&e<3&&(s&&s.remove(),c.classList.contains("hint_choosed")&&c.classList.remove("hint_choosed"),0==e&&showComments(o,"true")),3<=e){c.className="process",s&&s.remove();let e=new FormData;e.append("name",c.value),e.append("id",o),e.append("ajaxSettings","page:Main:getLogins");let t=await fetch("/Ajax.php",{method:"POST",body:e});var m,i=await t.json();let n=l.querySelector(".comments_filter"),a=document.createElement("div");for(m in n.appendChild(a),a.classList.add("comments_hints"),i){let e=document.createElement("div");a.appendChild(e),e.textContent=i[m].name,e.className="comments_hint";let t=document.createAttribute("onclick");t.value="addHint("+o+", this)",e.setAttributeNode(t)}}}function addHint(e,t){let n=document.querySelector('.article[data-article="'+e+'"]'),a=document.getElementById("filter_"+e);a.value=t.textContent,a.classList.add("hint_choosed");let o=n.querySelector(".comments_hints");o&&o.remove(),showComments(e,"true")}function showFiltered(e){let t=document.querySelector('.article[data-article="'+e+'"]'),n=document.getElementById("filter_"+e);n.classList.contains("hint_choosed")||n.classList.add("hint_choosed");let a=t.querySelector(".comments_hints");a&&a.remove(),showComments(e,"true")}