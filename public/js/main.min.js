async function sentComment(){let e=new FormData;let t=document.forms[0].elements.text;e.append("text",t.value),e.append("ajaxSettings","page:Main:sentComment");let n=await fetch("/Ajax.php",{method:"POST",body:e});var o=await n.json();let a=document.createElement("div");a.classList.add("comment");var m=document.getElementsByClassName("comment")[0];let l=document.querySelector(".comments_show");m?l.insertBefore(a,document.getElementsByClassName("comment")[0]):l.appendChild(a);var s,c={b:"login",span:"text",p:"date"};for(s in c){let e=document.createElement(s);e.textContent=o[c[s]],a.appendChild(e)}t.value="",e=null}async function showComments(n=""){let o=new FormData;var e=document.querySelectorAll(".comment"),e=""!=n?0:e.length;o.append("from",e);e=document.querySelector(".hint_choosed");e&&o.append("filter",e.value),o.append("ajaxSettings","page:Main:showComments");let t=await fetch("/Ajax.php",{method:"POST",body:o});var a=await t.json();if(0!=a[0]){""!=n&&(document.querySelector(".comments_show").innerText="");let e=document.querySelector(".comments_show");var m,l={b:"login",span:"text",p:"date"};for(m in a)if(3!=m){let t=document.createElement("div");for(var s in e.appendChild(t),t.classList.add("comment"),l){let e=document.createElement(s);e.textContent=a[m][l[s]],t.appendChild(e)}}let t=document.querySelector(".comments_more");1!=a.length&&"show"==a[a.length-1]||(t.style.display="none"),4==a.length&&(t.style.display="block"),o=null}}async function filterComments(e){let a=document.querySelector(".comments_hints"),m=document.getElementById("filter");if(e<3&&(a&&a.remove(),m.classList.contains("hint_choosed")&&m.classList.remove("hint_choosed"),showComments("true")),3<=e){a&&a.remove();let e=new FormData;e.append("login",m.value),e.append("ajaxSettings","page:Main:getLogins");let t=await fetch("/Ajax.php",{method:"POST",body:e});var l,s=await t.json();let n=document.querySelector(".comments_filter"),o=document.createElement("div");for(l in n.appendChild(o),o.classList.add("comments_hints"),s){let e=document.createElement("div");o.appendChild(e),e.textContent=s[l].login,e.classList.add("comments_hint");let t=document.createAttribute("onclick");t.value="addHint(this)",e.setAttributeNode(t)}}}function addHint(e){let t=document.getElementById("filter");t.value=e.textContent,t.classList.add("hint_choosed");let n=document.querySelector(".comments_hints");n&&n.remove(),showComments("true")}function showFiltered(){let e=document.getElementById("filter");e.classList.contains("hint_choosed")||e.classList.add("hint_choosed");let t=document.querySelector(".comments_hints");t&&t.remove(),showComments("true")}