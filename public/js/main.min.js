async function sentComment(){let e=new FormData;let t=document.forms[0].elements.text;e.append("text",t.value),e.append("ajaxSettings","page:Main:sentComment");let n=await fetch("/Ajax.php",{method:"POST",body:e});var o=await n.json();let m=document.createElement("div");m.classList.add("comment");var l=document.getElementsByClassName("comment")[0];let a=document.querySelector(".comments_show");l?a.insertBefore(m,document.getElementsByClassName("comment")[0]):a.appendChild(m);var c,s={b:"login",span:"text",p:"date"};for(c in s){let e=document.createElement(c);e.textContent=o[s[c]],m.appendChild(e)}t.value="",e=null}async function showComments(t=""){let n=new FormData,o=document.querySelectorAll(".comment");var e=""!=t?0:o.length;n.append("from",e);e=document.querySelector(".hint_choosed");e&&n.append("filter",e.value),n.append("ajaxSettings","page:Main:showComments");let m=await fetch("/Ajax.php",{method:"POST",body:n});if(m){var l=await m.json();if(0!=l[0]){for(key in""!=t&&o.forEach(e=>{e.remove()}),l){let m=document.querySelector(".comments_show");if(3!=key){let e=document.createElement("div");m.appendChild(e),e.classList.add("comment");let t=document.createElement("p");t.textContent=l[key].login,e.appendChild(t);let n=document.createElement("span");n.textContent=l[key].text,e.appendChild(n);let o=document.createElement("p");o.textContent=l[key].date,e.appendChild(o)}}let e=document.querySelector(".comments_more");1!=l.length&&"show"==l[l.length-1]||(e.style.display="none"),4==l.length&&(e.style.display="block"),n.delete("from"),n.delete("filter"),n.delete("buttonStatus")}}}async function filterComments(e){let n=new FormData;if(e<3&&(document.querySelector(".comments_hints")&&document.querySelector(".comments_hints").remove(),document.getElementById("filter").classList.contains("hint_choosed"),document.getElementById("filter").classList.remove("hint_choosed"),showComments("true")),3<=e){n.append("login",document.getElementById("filter").value),n.append("ajaxSettings","page:Main:getLogins");let t=await fetch("/Ajax.php",{method:"POST",body:n});if(t){document.querySelector(".comments_hints")&&document.querySelector(".comments_hints").remove();let e=document.querySelector(".comments_filter");var o=await t.json();let n=document.createElement("div");for(key in e.appendChild(n),n.classList.add("comments_hints"),o){let e=document.createElement("div");n.appendChild(e),e.textContent=o[key].login,e.classList.add("comments_hint");let t=document.createAttribute("onclick");t.value="addHint(this)",e.setAttributeNode(t)}}}}function addHint(e){let t=document.getElementById("filter");t.value=e.textContent,t.classList.add("hint_choosed");let n=document.querySelector(".comments_hints");n&&n.remove(),showComments("true")}function showFiltered(){let e=document.getElementById("filter");e.classList.contains("hint_choosed")||e.classList.add("hint_choosed");let t=document.querySelector(".comments_hints");t&&t.remove(),showComments("true")}